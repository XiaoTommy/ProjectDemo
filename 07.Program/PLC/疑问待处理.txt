1. 顶升的时候，既需要回原点，但是不能使用脉冲模式，只能使用速度模式，那么就只能使用驱动器自带的回原点模式，那么限位开关就需要接到驱动器上，而不能接到PLC上。
2. 那么顶升的时候，使用的应该是位置控制模式了，而不能使用速度控制模式。那么手动上下的时候就需要指定具体的位置是无限远。
3. 然后顶升的时候是使用位置控制，而不是使用速度控制。

4. 当顶升需要有扭矩的时候，我们就需要使用到电机的扭矩控制。但是这个还是没有想清楚怎么做比较好。

还是觉得通讯方面有很多的问题，因为车辆有很多需要通讯的地方，其实是可以使用总线通讯的，这样子速率就可以提高很多。尽量少使用点对点的通讯。其实很多东西都可以使用CAN通讯的，当然对于倍加福的PGV使用点对点的485通讯可以，但是尽量还是不要使用轮询的。

RFID的读取数据还需要进行测试验证，因为顺序肯定是不对的

车辆的移动控制，最后一关就是PID调节，我的速度经过故障处理--纠偏处理--前激光处理--后激光处理，(左转和右转是自由模式下的控制，此时是否和惯性导航的角度偏差冲突？因为惯性导航的话，上位会给定我要偏差的角度。或许左转右转都不需要，只需要有一个偏差值进行无限的PID纠偏，所以PID纠偏是一个重要的地方)，我对两个轮子进行纠偏，那么就需要有一个偏差值，那么怎么获取这个偏差是最重要的。对于磁导航而言，偏差值就是磁条相对磁导航的偏差。对于惯导而言，偏差值就是车头朝向相对陀螺仪Y轴的位置。从而根据偏差值进行PID的调节。

RCode
WCode


10.手动激光开关


需要输入的东西
D6283	L控制速度L
D6284	L控制速度H
D6285	L回原点速度L
D6286	L回原点速度H
D6287	L梯形速度L
D6288	L梯形速度H
D6289	L加速度L
D6290	L加速度H
D6291	L减速度L
D6292	L减速度H
D6293	L定位目标位置L
D6294	L定位目标位置H
D6295L	L控制模式
D6295H	L回零方式


车辆行走是靠3个条件来满足的 
车辆速度//车辆方向//转弯半径

速度>=0
方向=0 向前
方向=1 向后
转弯版精华 = 直行
转弯半径 >0 左转
转弯半径 <0 右转













显示的东西
D6032	L状态字
D6033	L报错代码1
D6034	L报错代码2
D6035	L实际电流
D6036	L实际位置L
D6037	L实际位置H
D6038	L实际速度L
D6039	L实际速度H
D6040	R状态字
D6041	R报错代码1
D6042	R报错代码2
D6043	R实际电流
D6044	R实际位置R
D6045	R实际位置H
D6046	R实际速度R
D6047	R实际速度H
D6048	Ding状态字
D6049	Ding报错代码1
D6050	Ding报错代码2
D6051	Ding实际电流
D6052	Ding实际位置Ding
D6053	Ding实际位置H
D6054	Ding实际速度Ding
D6055	Ding实际速度H





需要显示的东西
M600	左轮驱动已使能
M601	左轮驱动模式已使能
M602	左轮驱动报警中
M603	左轮位置已到达
M604	左轮正负限位触发
M605	左轮找零完成
M610	右轮驱动已使能
M611	右轮驱动模式已使能
M612	右轮驱动报警中
M613	右轮位置已到达
M614	右轮正负限位触发
M615	右轮找零完成
M620	顶升驱动已使能
M621	顶升驱动模式已使能
M622	顶升驱动报警中
M623	顶升位置已到达
M624	顶升正负限位触发
M625	顶升找零完成

直线纠偏误差 输入以及显示

旋转纠偏误差

参数变量--单驼峰写法--customeId

当前RFID/////纠偏RFID

数组ARRAY 下标是从0开始的

PID的参数需要进行设置调整，磁导航的点位需要进行调整

如果旋转半径放到无穷远的化就是直行，旋转半径为0 的话就是原地旋转

距离的单位是0.1mm 1000表示0.1m， 10000表示1m，最大65535也就是6m
单位全部都是0.1mm级别的

RFID处理//二维码处理//惯导处理

上位给的速度是16位的，需要转换成32位浮点数的数据，因为最后驱动器接受的也是32位数据得

顶升和上位的信号对接还是有点问题的


脱磁报警和激光报警需要再次确认一下
漏读芯片报警


常用电池的型号，主要是通讯方面

最好是所有的IP通信，串口通讯太麻烦了






